{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/apply_tool.js","webpack:///./src/js/change_tool.js","webpack:///./src/js/circle.js","webpack:///./src/js/clone_canvas.js","webpack:///./src/js/eraser.js","webpack:///./src/js/fill.js","webpack:///./src/js/index.js","webpack:///./src/js/new_canvas.js","webpack:///./src/js/pencil.js","webpack:///./src/js/pipette.js","webpack:///./src/js/remove_canvas.js","webpack:///./src/js/square.js","webpack:///./src/js/utilities.js","webpack:///./src/scss/style.scss?09a9"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;AClFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACkC;AACA;AACA;AACE;AACN;AACI;;AAElC;AACA,EAAE,sDAAM;AACR,EAAE,sDAAM;AACR,EAAE,sDAAM;AACR,EAAE,yDAAO;AACT,EAAE,gDAAI;AACN,EAAE,sDAAM;AACR;;AAEA;AACA;AACA;AACA,iBAAiB,qBAAqB;AACtC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA,IAAI;AACJ;;;AAGA;AACA;AACA;AACA;;AAEA,SAAS,OAAO;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,8BAA8B;AACjD;AACA,8EAA8E,QAAQ;AACtF;AACA;AACA;AACA;AACA;;AAEqB;;;;;;;;;;;;;AClErB;AAAA;AAAA;AACA;AACA,OAAO,SAAS;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,kBAAkB;AACnC;AACA;;AAEA;AACA;;AAEsB;;;;;;;;;;;;;ACnBtB;AAAA;AAAA;;AAEA;;;;;;;;;;;;;;ACFA;AAAA;AAAA;AAAA;AACA;AACoF;;AAEpF;;AAEA;AACA,OAAO,SAAS;AAChB;AACA;AACA;AACA,sBAAsB,4DAAS;AAC/B;AACA;AACA,qBAAqB,qBAAqB;AAC1C;AACA;AACA,2BAA2B,wEAAqB;AAChD,wBAAwB,4DAAS;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEiC;;;;;;;;;;;;;AC5BjC;AAAA;AAAA;AAAuC;;AAEvC;AACA;AACA;AACA;AACA;AACA,oBAAoB,8DAAQ;AAC5B,qBAAqB,kBAAkB;AACvC;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;;;;;;;;;;;;;ACfA;AAAA;AAAA;;AAEA;;;;;;;;;;;;;;ACFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA,WAAW,aAAa;AACsB;AACF;AACoB;AACN;AACE;;AAE5D;AACA;AACA;AACA;;AAEA,oCAAoC,0DAAU;AAC9C,0CAA0C,wDAAS;AACnD,2CAA2C,+DAAmB;AAC9D,2CAA2C,uDAAW;AACtD,2CAA2C,sEAAqB;AAChE,2CAA2C,wEAAsB;;;;;;;;;;;;;ACpBjE;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;;AAEwC;;AAExC;;AAEA;AACA,kBAAkB,4DAAS;AAC3B;AACA;AACA;AACA,iBAAiB,qBAAqB;AACtC;AACA;AACA,oBAAoB,4DAAS;AAC7B;AACA;AACA;;AAEA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA,mBAAmB,qBAAqB;AACxC;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAE4C;;;;;;;;;;;;;ACtC5C;AAAA;AAAA;AAAuC;;AAEvC;AACA;AACA;AACA;AACA;AACA,oBAAoB,8DAAQ;AAC5B,qBAAqB,kBAAkB;AACvC;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEkB;;;;;;;;;;;;;ACjBlB;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACVA;AAAA;AAAA;AAAkF;;AAElF;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAkB,qBAAqB;AACvC;AACA;AACA,yBAAyB,wEAAqB;AAC9C;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACpBA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACfA;AAAA;AAAA;AAAA;AAAA;AAAA,iDAAiD;AACjD;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,iBAAiB,uBAAuB;AACxC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,qBAAqB;AACtC;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC7CA,uC","file":"./js/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/* eslint-disable import/prefer-default-export */\n/* eslint-disable no-mixed-spaces-and-tabs */\n/* eslint-disable no-tabs */\nimport { pencil } from './pencil';\nimport { circle } from './circle';\nimport { square } from './square';\nimport { pipette } from './pipette';\nimport { fill } from './fill';\nimport { eraser } from './eraser';\n\nconst tools = {\n  pencil,\n  circle,\n  square,\n  pipette,\n  fill,\n  eraser,\n};\n\nfunction applyTool(e) {\n  let canvas;\n  const canvases = document.getElementsByClassName('drawing-area')[0].getElementsByTagName('canvas');\n  for (let i = 0; i < canvases.length; ++i) {\n    if (!canvases[i].hidden) {\n      canvas = canvases[i];\n    }\n  }\n  const imgData = canvas.getContext('2d').getImageData(0, 0, canvas.width, canvas.height);\n\n  const props = {\n  \tpClX: null, // previous ceil x\n  \tpClY: null, // previous ceil y\n  \tcClX: null, // currient ceil x\n  \tcClY: null, // currient ceil y\n  \tclSize: canvas.width / canvas.dataset.ceilWidth, // ceil size\n  \tclNum(pos) { // calculate ceil number\n  \t\treturn Math.floor(pos / this.clSize);\n  \t},\n  };\n\n\n  if (e.target.tagName === 'canvas') {\n    props.pClX = props.clNum(e.offsetX);\n    props.pClY = props.cNum(e.offsetY);\n  }\n\n  const { tool } = document.querySelector('.tools-container').dataset;\n  canvas.onmousemove = function (e) {\n    if (tools[tool]){\n      tools[tool](e, canvas, props, imgData);\n    }\n  };\n\n  window.onmouseup = function () {\n    canvas.onmousemove = null;\n    const dataURL = canvas.toDataURL('image/png');\n    const previewListCanvas = document.getElementsByClassName('preview-list-tile');\n    for (let i = 0; i < previewListCanvas.length; ++i) {\n      if (previewListCanvas[i].dataset.selectPreview === canvas.dataset.selectPreview) {\n        previewListCanvas[i].firstElementChild.style.backgroundImage = `url(${dataURL})`;\n      }\n    }\n    window.onmouseup = null;\n  };\n}\n\nexport { applyTool };\n","/* eslint-disable import/prefer-default-export */\nfunction changeTool(e) {\n  let { target } = e;\n  while (target) {\n    if (target.tagName === 'LI') {\n      this.dataset.tool = target.dataset.toolName;\n      break;\n    }\n    target = target.parentElement;\n  }\n\n  const tools = this.children;\n  for (let i = 0; i < tools.length; ++i) {\n    tools[i].classList.remove('active');\n  }\n\n  target.classList.add('active');\n}\n\nexport { changeTool };\n","function circle(e) {\n\n};\n\nexport {circle};","/* eslint-disable no-plusplus */\n/* eslint-disable no-unused-vars */\nimport { getMaxSelectPreview, cloneElem, getCanvasFromPrewList } from './utilities';\n\nconst drawingArea = document.querySelector('.drawing-area');\n\nfunction clonePreviewAndCanvas(e) {\n  let { target } = e;\n  while (target) {\n    if (target.className === 'preview-list-duplicate') {\n      const clonedPrew = target.parentElement.parentElement;\n      const newPrew = cloneElem(clonedPrew);\n      clonedPrew.insertAdjacentElement('afterEnd', newPrew);\n      const canvases = drawingArea.children;\n      for (let i = 0; i < canvases.length; ++i) {\n        canvases[i].hidden = true;\n      }\n      const clonedCanvas = getCanvasFromPrewList(clonedPrew);\n      const newCanvas = cloneElem(clonedCanvas);\n      newCanvas.getContext('2d').drawImage(clonedCanvas, 0, 0);\n      drawingArea.appendChild(newCanvas);\n      newCanvas.hidden = false;\n      break;\n    }\n    target = target.parentElement;\n  }\n}\n\nexport { clonePreviewAndCanvas };\n","import {getCeils} from './utilities.js'\n\nfunction eraser(e, canvas, props) {\n  props.cClX = props.clNum(e.offsetX);\n  props.cClY = props.clNum(e.offsetY);\n  if (props.pClX != null && props.pClY != null) {\n    if (Math.abs(props.cClX - props.pClX) > 1 || Math.abs(props.cClY - props.pClY) > 1) {\n      const ceils = getCeils(props.pClX, props.pClY, props.cClX, props.cClY);\n      for (let i = 0; i < ceils.length; ++i) {\n        canvas.getContext('2d').clearRect(ceils[i].x * props.clSize, ceils[i].y * props.clSize, props.clSize, props.clSize);\n      }\n    } else canvas.getContext('2d').clearRect(props.pClX * props.clSize, props.pClY * props.clSize, props.clSize, props.clSize);\n  }\n  props.pClX = props.clNum(e.offsetX);\n  props.pClY = props.clNum(e.offsetY);\n};\n\nexport {eraser};","function fill(e) {\n\n};\n\nexport {fill};","/* eslint-disable import/extensions */\n/* eslint-disable import/no-cycle */\n// eslint-disable-next-line import/named\n// import { addOnWheel } from './zoom';\nimport { changeTool } from './change_tool.js';\nimport { applyTool } from './apply_tool.js';\nimport { newPreviewAndCanvas, selectFrame } from './new_canvas';\nimport { clonePreviewAndCanvas } from './clone_canvas.js';\nimport { removePreviewAndCanvas } from './remove_canvas.js';\n\nconst tools = document.querySelector('.tools-container');\nconst drawingArea = document.querySelector('.drawing-area');\nconst newBtnCanvas = document.querySelector('#new_frame');\nconst listSortable = document.querySelector('.preview-list-sortable');\n\ntools.addEventListener('mousedown', changeTool, true);\ndrawingArea.addEventListener('mousedown', applyTool, true);\nnewBtnCanvas.addEventListener('mousedown', newPreviewAndCanvas, true);\nlistSortable.addEventListener('mousedown', selectFrame, true);\nlistSortable.addEventListener('mousedown', clonePreviewAndCanvas, true);\nlistSortable.addEventListener('mousedown', removePreviewAndCanvas, true);\n","/* eslint-disable no-plusplus */\n/* eslint-disable no-shadow */\n/* eslint-disable no-undef */\n/* eslint-disable import/prefer-default-export */\n/* eslint-disable func-names */\n\nimport { cloneElem } from './utilities';\n\nconst drawingArea = document.querySelector('.drawing-area');\n\nfunction newPreviewAndCanvas() {\n  const newPrew = cloneElem(document.getElementById('list').lastElementChild);\n  newPrew.firstElementChild.style.backgroundImage = 'none';\n  document.getElementById('list').appendChild(newPrew);\n  const canvases = drawingArea.children;\n  for (let i = 0; i < canvases.length; ++i) {\n    canvases[i].hidden = true;\n  }\n  const newCanvas = cloneElem(drawingArea.lastElementChild);\n  drawingArea.appendChild(newCanvas);\n  newCanvas.hidden = false;\n}\n\nconst selectFrame = function (event) {\n  if (event.target.className === 'tile-view canvas') {\n    const prewElem = event.target.parentElement;\n    const id = prewElem.dataset.selectPreview; // id in prew list\n    const canvases = drawingArea.children;\n    for (let i = 0; i < canvases.length; ++i) {\n      if (canvases[i].dataset.selectPreview === id) {\n        canvases[i].hidden = false;\n      } else {\n        canvases[i].hidden = true;\n      }\n    }\n  }\n};\n\nexport { newPreviewAndCanvas, selectFrame };\n","import {getCeils} from './utilities.js'\n\nconst pencil = function (e, canvas, props) {\n  props.cClX = props.clNum(e.offsetX);\n  props.cClY = props.clNum(e.offsetY);\n  if (props.pClX != null && props.pClY != null) {\n    if (Math.abs(props.cClX - props.pClX) > 1 || Math.abs(props.cClY - props.pClY) > 1) {\n      const ceils = getCeils(props.pClX, props.pClY, props.cClX, props.cClY);\n      for (let i = 0; i < ceils.length; ++i) {\n        canvas.getContext('2d').fillRect(ceils[i].x * props.clSize, ceils[i].y * props.clSize, props.clSize, props.clSize);\n      }\n    } else canvas.getContext('2d').fillRect(props.pClX * props.clSize, props.pClY * props.clSize, props.clSize, props.clSize);\n  }\n  props.pClX = props.clNum(e.offsetX);\n  props.pClY = props.clNum(e.offsetY);\n};\n\nexport { pencil };\n","function pipette(e, canvas, props, imgData) {\n\tconst ctx = canvas.getContext('2d');\n\tif (props.pClX == null && props.pClY == null) {\n\t\tprops.pClX = props.clNum(e.offsetX);\n\t\tprops.pClY = props.clNum(e.offsetY);\n\t} else {\n\t  props.cClX = props.clNum(e.offsetX);\n\t\tprops.cClY = props.clNum(e.offsetY);\n\t\tctx.putImageData(imgData, (props.cClX - props.pClX) * props.clSize, (props.cClY - props.pClY) * props.clSize);\n\t}\n};\n\nexport {pipette};","import {getMaxSelectPreview, cloneElem, getCanvasFromPrewList} from './utilities';\n\nconst drawingArea = document.querySelector('.drawing-area');\n\nfunction removePreviewAndCanvas(e) {\n\tif (e.target.className === 'preview-list-delete' && e.target.parentElement.parentElement.parentElement.children.length > 1){\n\t\tconst removedPrew = e.target.parentElement.parentElement;\n\t\tremovedPrew.remove();\n\t  const canvases = drawingArea.children;\n\t  for (let i = 0; i < canvases.length; ++i){\n\t    canvases[i].hidden = true;\n\t  }\n\t  const removedCanvas = getCanvasFromPrewList(removedPrew);\n\t  if (removedCanvas.parentElement.firstElementChild === removedCanvas){\n\t  \tremovedCanvas.nextElementSibling.hidden = false;\n\t  } else {\n\t  \tremovedCanvas.previousElementSibling.hidden = false;\n\t  }\n\t  removedCanvas.remove();\n\t}\n};\n\nexport { removePreviewAndCanvas };","function square(e, canvas, props, imgData) {\n\tconst ctx = canvas.getContext('2d');\n\tctx.lineWidth = props.clSize;\n\tif (props.pClX == null && props.pClY == null) {\n\t\tprops.pClX = props.clNum(e.offsetX);\n\t\tprops.pClY = props.clNum(e.offsetY);\n\t} else {\n\t\tctx.putImageData(imgData, 0, 0);\n\t  props.cClX = props.clNum(e.offsetX);\n\t\tprops.cClY = props.clNum(e.offsetY);\n\t\tctx.strokeRect(props.pClX * props.clSize + props.clSize * .5,\n\t\t\t\t\t\t\t\t\t props.pClY * props.clSize + props.clSize * .5,\n\t\t\t\t\t\t\t\t  (props.cClX - props.pClX) * props.clSize,\n\t\t\t\t\t\t\t    (props.cClY - props.pClY) * props.clSize);\n\t}\n};\n\nexport {square};","function getCeils(prevCX, prevCY, curCX, curCY) { // https://ru.wikipedia.org/wiki/%D0%90%D0%BB%D0%B3%D0%BE%D1%80%D0%B8%D1%82%D0%BC_%D0%91%D1%80%D0%B5%D0%B7%D0%B5%D0%BD%D1%85%D1%8D%D0%BC%D0%B0\n  const pixels = [];\n\n  const dx = Math.abs(curCX - prevCX);\n  const dy = Math.abs(curCY - prevCY);\n  const sx = (prevCX < curCX) ? 1 : -1;\n  const sy = (prevCY < curCY) ? 1 : -1;\n\n  let err = dx - dy;\n\n  while (true) {\n    pixels.push({ x: prevCX, y: prevCY });\n    if ((prevCX === curCX) && (prevCY === curCY)) break;\n\n    const e2 = 2 * err;\n    if (e2 > -dy) {\n      err -= dy;\n      prevCX += sx;\n    }\n    if (e2 < dx) {\n      err += dx;\n      prevCY += sy;\n    }\n  }\n  return pixels;\n}\n\nfunction getMaxSelectPreview(elem) {\n  return [].reduce.call(elem.parentElement.children, (acc, el) => el.dataset.selectPreview > acc ? +el.dataset.selectPreview : acc, 0);\n};\n\nfunction cloneElem(elem){\n  const newElem = elem.cloneNode(true);\n  newElem.dataset.selectPreview = getMaxSelectPreview(elem) + 1;\n  return newElem;\n};\n\nfunction getCanvasFromPrewList(prewListElem){\n  const id = prewListElem.dataset.selectPreview;\n  const canvases = document.querySelector('.drawing-area').children;\n  for (let i = 0; i < canvases.length; ++i) {\n    if (canvases[i].dataset.selectPreview === id) {\n      return canvases[i];\n    }\n  }\n}\n\nexport {getCeils, getMaxSelectPreview, cloneElem, getCanvasFromPrewList};","// extracted by mini-css-extract-plugin"],"sourceRoot":""}